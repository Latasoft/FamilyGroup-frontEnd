<div class="container mx-auto px-6 py-8 " *ngIf="selectedProperty">
  <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
    <!-- Contenido principal -->
    <div class="lg:col-span-2">
      <!-- Encabezado -->
      <header class="mb-8 flex flex-col lg:flex-row justify-between items-start lg:items-center border-b pb-4">
        <div>
          <h1 class="text-3xl font-bold text-gray-800">
            <strong>Nombre: </strong>{{ selectedProperty.nombre }}
          </h1>
          <p class="text-gray-600 text-lg mt-2">
            <strong>Ubicación: </strong>{{ selectedProperty.comuna }}, {{ selectedProperty.region }}
          </p>
        </div>
        <div class="mt-4 lg:mt-0 text-right">
          <p class="font-bold text-center text-white bg-blue-600 px-4 py-1 rounded-full shadow-md">
            {{ selectedProperty.tipo_operacion }}
          </p>
          <p class="text-gray-800 font-bold mt-2">
            <strong>Valor: </strong>{{ formatPrice(selectedProperty.precio) }} <strong>{{ selectedProperty.precio.moneda }}</strong>
          </p>
        </div>
      </header>

         <!-- Slider de imágenes -->
         <section class="mb-10">
          <div class="relative rounded-lg overflow-hidden shadow-lg">
            <app-slaider [images]="getImageUrls()"></app-slaider>
          </div>
        </section>

      <!-- Descripción -->
      <section class="mb-8">
        <h2 class="text-2xl font-bold mb-4 text-gray-800 border-b pb-2">Descripción</h2>
        <p class="text-gray-700 leading-relaxed text-lg">{{ selectedProperty.descripcion }}</p>
      </section>

      <!-- Características -->
      <section class="mb-8">
        <h2 class="text-2xl font-bold mb-4 text-gray-800 border-b pb-2">Características</h2>
        <ul class="list-disc pl-5 text-lg">
          <li class="text-gray-700">{{ selectedProperty.dormitorios }} habitaciones</li>
          <li class="text-gray-700">{{ selectedProperty.banos }} baños</li>
          <li class="text-gray-700">{{ selectedProperty.superficie }} m²</li>
        </ul>
      </section>

      <section *ngIf="selectedProperty?.detalles_adicionales" class="mb-8">
        <h2 class="text-2xl font-bold mb-4 text-gray-800 border-b pb-2">Detalles Adicionales</h2>
        <ul class="list-disc pl-5 text-lg">
          <li *ngFor="let detalle of getDetallesArray(selectedProperty.detalles_adicionales)" class="text-gray-700">
            {{ detalle }}
          </li>
        </ul>
      </section>

      <section *ngIf="selectedProperty?.detalles_destacados" class="mb-8">
        <h2 class="text-2xl font-bold mb-4 text-gray-800 border-b pb-2">Detalles Destacados</h2>
        <ul class="list-disc pl-5 text-lg">
          <li *ngFor="let detalle of getDetallesArray(selectedProperty.detalles_destacados)" class="text-gray-700">
            {{ detalle }}
          </li>
        </ul>
      </section>

      <!-- Botones de compartir SOLO en escritorio -->
      <section class="mb-8 hidden lg:flex items-center gap-4">
        <button (click)="shareOnWhatsApp(selectedProperty)"
          class="w-full max-w-sm lg:w-auto bg-green-500 text-white py-3 px-6 rounded-lg shadow-md hover:bg-green-600 transition flex items-center justify-center gap-2 text-lg">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM17 13H13V17H11V13H7V11H11V7H13V11H17V13Z"/>
          </svg>
          Compartir en WhatsApp
        </button>
        <button (click)="shareByEmail(selectedProperty)"
          class="w-full lg:w-auto bg-blue-500 text-white py-3 px-6 rounded-lg shadow-md hover:bg-blue-600 transition flex items-center justify-center gap-2 text-lg">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 24 24" fill="currentColor">
            <path d="M2 6.5V17c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6.5L12 13 2 6.5zM12 11l10-6H2l10 6z"/>
          </svg>
          Compartir por Correo
        </button>
      </section>

    </div>

    <!-- Card del agente -->
    <div class="lg:col-span-1">
      <div class="sticky top-4 bg-white p-6 rounded-lg shadow-lg">
        <div class="flex flex-col items-center text-center">
          <img [src]="selectedProperty.agent?.foto_agente || 'assets/images/default-agent.jpg'" alt="Foto del agente"
            class="w-32 h-32 object-cover rounded-full shadow-md border mb-4" />
          <h3 class="text-xl font-bold text-gray-800 mb-2">
            {{ selectedProperty.agent?.nombre }} {{ selectedProperty.agent?.apellido }}
          </h3>
          <p class="text-gray-600 mb-2">{{ selectedProperty.agent?.titulo_agente }}</p>
          <p class="text-gray-600 mb-4">{{ selectedProperty.agent?.telefono_agente }}</p>

          <!-- Botones de contacto -->
          <div class="space-y-3 w-full">
            <button (click)="abrirWhatsApp()"
              class="w-full bg-green-500 text-white py-2 px-4 rounded-lg hover:bg-green-600 transition-colors flex items-center justify-center gap-2">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM17 13H13V17H11V13H7V11H11V7H13V11H17V13Z"/>
              </svg>
              Contactar por WhatsApp
            </button>
          </div>

          <!-- Botones de compartir SOLO en móviles -->
          <div class="flex flex-col gap-4 mt-4 w-full lg:hidden">
            <button (click)="shareOnWhatsApp(selectedProperty)" class="w-full bg-green-500 text-white py-3 px-6 rounded-lg shadow-md hover:bg-green-600 transition flex items-center justify-center gap-2 text-lg">
              Compartir en WhatsApp
            </button>
            <button (click)="shareByEmail(selectedProperty)" class="w-full bg-blue-500 text-white py-3 px-6 rounded-lg shadow-md hover:bg-blue-600 transition flex items-center justify-center gap-2 text-lg">
              Compartir por Correo
            </button>
          </div>

        </div>
      </div>
    </div>
  </div>
</div>